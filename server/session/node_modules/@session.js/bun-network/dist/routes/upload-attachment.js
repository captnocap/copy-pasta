import { SessionFetchError, SessionFetchErrorCode } from '@session.js/errors';
const fileServerURL = 'http://filev2.getsession.org';
export async function uploadAttachment(body) {
    const request = await fetch(`${fileServerURL}/file`, {
        method: 'POST',
        body: body.data,
        proxy: this.proxy
    });
    if (request.status !== 200) {
        throw new SessionFetchError({
            code: SessionFetchErrorCode.UploadFailed,
            message: 'Failed to upload attachment to filev2.getsession.org'
        });
    }
    const response = await request.json();
    return { id: Number(response.id), url: `${fileServerURL}/file/${response.id}` };
}
